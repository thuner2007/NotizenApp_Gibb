<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="NotizenApp.MainPage"
    BackgroundColor="{StaticResource Background}">

    <Grid RowDefinitions="Auto,*" Padding="20">
        <Grid ColumnDefinitions="*,Auto" Grid.Row="0">
            <VerticalStackLayout Grid.Column="0">
                <SearchBar x:Name="SearchBar"
                          Placeholder="Search a note..."
                          BackgroundColor="{StaticResource Surface}"
                          TextColor="{StaticResource TextPrimary}"
                          PlaceholderColor="{StaticResource TextSecondary}"/>

                <Label x:Name="WelcomeLabel"
                       Text="Hello, {Name}"
                       FontSize="32"
                       Margin="0,10,0,20"/>
            </VerticalStackLayout>

            <ImageButton Grid.Column="1"
                        Source="settings.png"
                        HeightRequest="24"
                        WidthRequest="24"
                        Clicked="OnSettingsClicked"/>
        </Grid>

        <CollectionView Grid.Row="1" 
                       x:Name="NotesCollection"
                       SelectionMode="Single"
                       SelectionChanged="OnNoteSelected">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical"
                                Span="2"
                                VerticalItemSpacing="10"
                                HorizontalItemSpacing="10"/>
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BackgroundColor="{StaticResource Surface}"
                           CornerRadius="10"
                           Padding="15">
                        <StackLayout>
                            <Label Text="{Binding Title}"
                                   FontSize="20"
                                   FontAttributes="Bold"/>
                            <Label Text="{Binding Content}"
                                   FontSize="14"
                                   TextColor="{StaticResource TextSecondary}"
                                   LineBreakMode="TailTruncation"
                                   MaxLines="2"/>
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>

</ContentPage>
